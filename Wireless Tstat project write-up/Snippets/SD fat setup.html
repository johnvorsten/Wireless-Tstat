<pre>
<font color="#434f54">&#47;&#47;=======================================================================&#47;&#47;</font>
<font color="#434f54">&#47;&#47;Begin declarations for SD Fat</font>

<font color="#434f54">&#47;&#47;Chip Select pin.</font>
<font color="#00979c">const</font> <font color="#00979c">uint8_t</font> <font color="#000000">chipSelect</font> <font color="#434f54">=</font> <font color="#000000">10</font><font color="#000000">;</font>

<font color="#434f54">&#47;&#47;Interval time between data records in milliseconds</font>
<font color="#434f54">&#47;&#47;This should be fast enough to be greater than card latency</font>

<font color="#434f54">&#47;&#47;Log file base name. has to be six chars or less?</font>
<font color="#5e6d03">#define</font> <font color="#000000">FILE_BASE_NAME</font> <font color="#005c5f">&#34;data&#34;</font>

<font color="#434f54">&#47;&#47;File system object</font>
<font color="#000000">SdFat</font> <font color="#000000">sd</font><font color="#000000">;</font>
<font color="#434f54">&#47;&#47;Log File</font>
<font color="#000000">SdFile</font> <font color="#000000">file</font><font color="#000000">;</font>

<font color="#434f54">&#47;&#47;Time in micros for next data record</font>
<font color="#00979c">uint32_t</font> <font color="#000000">logTime</font><font color="#000000">;</font>

<font color="#434f54">&#47;&#47;Write header data</font>
<font color="#00979c">void</font> <font color="#000000">WriteHeader</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#000000">file</font><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#000000">F</font><font color="#000000">(</font><font color="#005c5f">&#34;Time Stamp&#34;</font><font color="#000000">)</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#5e6d03">for</font> <font color="#000000">(</font><font color="#00979c">uint8_t</font> <font color="#000000">i</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font> <font color="#000000">i</font> <font color="#434f54">&lt;</font> <font color="#00979c">sizeof</font><font color="#000000">(</font><font color="#000000">TimeArray</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;<font color="#000000">i</font><font color="#434f54">++</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">file</font><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#000000">F</font><font color="#000000">(</font><font color="#005c5f">&#34;,Thermistor&#34;</font><font color="#000000">)</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">file</font><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#000000">i</font><font color="#434f54">,</font> <font color="#00979c">DEC</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#000000">file</font><font color="#434f54">.</font><font color="#d35400">println</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
<font color="#000000">}</font>

<font color="#434f54">&#47;&#47;Write your data record</font>
<font color="#00979c">void</font> <font color="#000000">logData</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#5e6d03">for</font> <font color="#000000">(</font><font color="#00979c">uint8_t</font> <font color="#000000">i</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font> <font color="#000000">i</font> <font color="#434f54">&lt;</font> <font color="#000000">9</font><font color="#000000">;</font> <font color="#000000">i</font><font color="#434f54">++</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">file</font><font color="#434f54">.</font><font color="#d35400">write</font><font color="#000000">(</font><font color="#00979c">&#39;,&#39;</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">file</font><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#000000">Temp_Store</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">]</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#000000">file</font><font color="#434f54">.</font><font color="#d35400">println</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
<font color="#000000">}</font>

<font color="#434f54">&#47;&#47;Log the current time</font>
<font color="#00979c">void</font> <font color="#000000">logRTDTime</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#434f54">&#47;&#47;######## GET DATA FROM RTC ########</font>
 &nbsp;<b><font color="#d35400">DateTime</font></b> <font color="#d35400">now</font> <font color="#434f54">=</font> <font color="#000000">rtc</font><font color="#434f54">.</font><font color="#d35400">now</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">TimeArray</font><font color="#000000">[</font><font color="#000000">0</font><font color="#000000">]</font> <font color="#434f54">=</font> <font color="#d35400">now</font><font color="#434f54">.</font><font color="#000000">dayOfTheWeek</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">TimeArray</font><font color="#000000">[</font><font color="#000000">1</font><font color="#000000">]</font> <font color="#434f54">=</font> <font color="#d35400">now</font><font color="#434f54">.</font><font color="#d35400">hour</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">TimeArray</font><font color="#000000">[</font><font color="#000000">2</font><font color="#000000">]</font> <font color="#434f54">=</font> <font color="#d35400">now</font><font color="#434f54">.</font><font color="#d35400">minute</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">TimeArray</font><font color="#000000">[</font><font color="#000000">3</font><font color="#000000">]</font> <font color="#434f54">=</font> <font color="#d35400">now</font><font color="#434f54">.</font><font color="#d35400">second</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>

 &nbsp;<font color="#5e6d03">for</font> <font color="#000000">(</font><font color="#00979c">uint8_t</font> <font color="#000000">i</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font> <font color="#000000">i</font> <font color="#434f54">&lt;</font> <font color="#000000">4</font><font color="#000000">;</font> <font color="#000000">i</font><font color="#434f54">++</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">file</font><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#000000">TimeArray</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">]</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">file</font><font color="#434f54">.</font><font color="#d35400">write</font><font color="#000000">(</font><font color="#00979c">&#39;,&#39;</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>
<font color="#000000">}</font>

<font color="#434f54">&#47;&#47;End SD Fat declarations and setup</font>
<font color="#434f54">&#47;&#47;--------------------------------------------------------------&#47;&#47;</font>

</pre>